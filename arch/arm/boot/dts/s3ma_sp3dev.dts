/*
 *  Copyright (C) 2015 Silver Bullet Technology
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

/dts-v1/;
#include <dt-bindings/gpio/gpio.h>
#include <dt-bindings/interrupt-controller/irq.h>

#include "s3ma.dtsi"

/ {
	model = "Exelis S3MA SP3 Development Board";
	compatible = "exelis,s3ma_sp3dev";

	chosen {
		bootargs = "console=ttyAMA0,115200";
	};

	memory {
		name = "memory";
		device_type = "memory";
		reg = <0x0 0x40000000>; /* 1 GB */
	};
	
	gpio-leds {
        compatible = "gpio-leds";

        user0 {
            label = "sp3:green:user0";
            gpios = <&gpio2 5 GPIO_ACTIVE_HIGH>;
        };
        user1 {
            label = "sp3:red:user0";
            gpios = <&gpio2 6 GPIO_ACTIVE_HIGH>;
        };
        user2 {
            label = "sp3:red:user1";
            gpios = <&gpio0 4 GPIO_ACTIVE_HIGH>;
        };
    };
    rproc0: remoteproc@0 {
	    compatible = "exelis,s3ma_remoteproc";
	    reg = < 0x0 0x10000000 >;
	    interrupt-parent = <&intc>;
	    /* 101 - UART1, 98 - timer0 */
	    /* interrupts = < 0 101 IRQ_TYPE_LEVEL_HIGH 0 98 IRQ_TYPE_LEVEL_HIGH>; */
	    firmware = "freertos";
	    cpu = <1>;
	    ipino = <5>;
	    vring0 = <2>;
	    vring1 = <3>;
	} ;
};

&gpio0 {
	status = "okay";
};

&gpio1 {
	status = "okay";
};

&gpio2 {
	status = "okay";
};

&i2c0 {
	status = "okay";

    /* TBD */
	max31725@68 {
		compatible = "maxim,max31725";
		reg = <0x68>;
	};
};

&ssp0 {
    fsl,spi-num-chipselects = <2>;
    cs-gpios = <&gpio0 3 0>, <&gpio0 7 0>;
    flash: m25p80@0 {
        compatible = "sst,sst25vf032b", "st,m25p80";
        spi-max-frequency = <20000000>;
        reg = <0>;
    };
    dac: ltc2640@1 {
        compatible = "ltc,ltc2640";
        spi-max-frequency = <20000000>;
        reg = <1>;
    };
    
};

&usb0 {
	status = "disabled";
	sbt,force-ulpi;
};

&usb1 {
	status = "okay";
	sbt,force-ulpi;
};

&timer {
	status = "disabled";
};

&pdma {
	status = "disabled";
};

